Step 2: Generate the directory tree
============

[[Parent]]: howto_recordings.txt

Once we have fully specified our recording using file `bcgs_settings.ini` we 
can generate the standard folder structure and place our data files in the 
correct locations.

## Directory tree

In order to generate the directory tree for recording `bcgs` run:

	somsds_new_rec bcgs_settings.ini

which will create, among others, the following directories:

	/data/recordings/bcgs/subjects/0001/eeg/orig/out
	/data/recordings/bcgs/subjects/0001/eeg/orig/in-scan
	/data/recordings/bcgs/subjects/0001/eeg/orig/in-noscan
	/data/recordings/bcgs/subjects/0001/fmri/orig/out
	/data/recordings/bcgs/subjects/0001/fmri/orig/in-scan
	/data/recordings/bcgs/subjects/0001/fmri/orig/in-noscan
	/data/recordings/bcgs/subjects/0001/smri/orig/out
	/data/recordings/bcgs/subjects/0001/smri/orig/in-scan
	/data/recordings/bcgs/subjects/0001/smri/orig/in-noscan
	...

All directories above will be owned by the username responsible of recording 
`bcgs` (in our case user `gherrero`). By default, nobody (not even `gherrero`) 
will be allowed to write anything into those folders. We say that recording 
`bcgs` is _protected_ (i.e. it cannot be erased or rewritten accidentally, even
by its responsible). See:

	[gherrero@somerenserver ~]$ ls /data/recordings
	total 96
	dr-xr-xr-x 5 gherrero  mt   4096 Oct 11 21:30 bcgs

	

## Move data files

You must now put the experimental data files in the right folders. In order
to do that, you will first have to _unprotect_ the recording so that you are 
allowed to write to the directory tree `/data/recordings/bcgs`. Run:

	somsds_unprotect_rec bcgs

which will give __only__ `gherrero` (the responsible of recording `bcgs`) write 
permission. See:

	[gherrero@somerenserver ~]$ ls /data/recordings/ -l
	total 96
	drwxr-xr-x 5 gherrero  mt   4096 Oct 11 21:30 bcgs

Now you are free to start moving files to their corresponding locations. 
In the case of modalities `smri` and `fmri` the `condition` is irrelevant and
therefore you can simply put the data files under the `orig` folders. So, 
in our `bcgs` example we placed the MRI files (including the scanner 
log files) in the locations:

	/data/recordings/bcgs/subjects/0001/fmri/orig
	/data/recordings/bcgs/subjects/0002/fmri/orig
	/data/recordings/bcgs/subjects/0001/smri/orig
	/data/recordings/bcgs/subjects/0002/smri/orig

We then placed the EEG files for condition `out` in the locations:

	/data/recordings/bcgs/subjects/0001/eeg/orig/out
	/data/recordings/bcgs/subjects/0002/eeg/orig/out

And, similarly, we placed the EEG files for conditions `in-scan` and `in-noscan`
in the locations:

	/data/recordings/bcgs/subjects/0001/eeg/orig/in-scan
	/data/recordings/bcgs/subjects/0001/eeg/orig/in-noscan
	/data/recordings/bcgs/subjects/0002/eeg/orig/in-scan
	/data/recordings/bcgs/subjects/0002/eeg/orig/in-noscan

Feel free to inspect directory tree `/data/recordings/bcgs` to check which 
files the folders above contain. 

## Move bcgs_settings.ini

You should place your recording settings file (`bcgs_settings.ini`) in folder
`/data/recordings/bcgs/doc`. This is important, as you will need this file in 
the future (e.g. for generating additional directories when you acquire more
 data).


## Delete empty directories

This is an optional step. After following the instructions above you will end 
up with a directory tree `/data/recordings/bcgs` that contains lots of empty
directories. One of the reasons for this is that some conditions might not be
relevant for some modalities (e.g. none of the conditions `out`, `in-scan`, 
`in-noscan` were relevant for the fMRI modality). You can easily remove all 
these empty directories by running:

	somsds_prune_rec bcgs

The command above will not remove the `doc` directories, even if they are 
empty. To force removal of empty `doc` directories use:

	somsds_prune_rec bcgs --doc


## Protect recording

It is strongly recommended that you _protect_ again the recording once 
you are done moving files into `/data/recordings/bcgs`. To do that you should
run the command:

	somsds_protect_rec bcgs

This will prevent that you accidentally delete data from `/data/recordings/bcgs`.



## What now?

We are now ready to go to the [next step][howto_file_descriptions], that is to
attach a series of descriptor tags to the most relevant experimental data files.

[howto_file_descriptions]: ./howto_file_descriptions.htm
