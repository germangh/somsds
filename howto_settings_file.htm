<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Step 1: Specify recording characteristics</title>
<link rel="stylesheet" type="text/css" href="../../../../remark_files/remark.css" />
<link rel="stylesheet" type="text/css" href="../../../../remark_files/pygments.css" />
<script type="text/javascript" src="../../../../remark_files/highslide/highslide-full.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../remark_files/highslide/highslide.css" />
<script type="text/javascript">
hs.graphicsDir = '../../../../remark_files/highslide/graphics/';
hs.showCredits = false;
</script>

</head>
<body>
<div id = "remark-all">
<div id = "remark">
<div class = "ParentList">

<ol>
<li><a href="somsds.htm">SOMSDS</a></li>
<li><a href="user_documentation.htm">User Documentation</a></li>
<li><a href="howto_recordings.htm">Organizing experimental data</a></li>
<li><a href="howto_settings_file.htm">Step 1: Specify recording characteristics</a></li>
</ol>
</div>

<div class = "remark-end-list"></div>

<h1>Step 1: Specify recording characteristics</h1>
<p><a href="howto_recordings.htm">Back to Organizing experimental data</a></p>
<h2>A real example</h2>
<p>To illustrate the process of bringing experimental data into the standard
SOMSDS directories we will use the experimental protocol depicted in the
 figure below:</p>
<div class="highslide-gallery">
<a href="protocol.png" class="highslide" onclick="hs.expandDuration = 250; hs.restoreDuration = 250; return hs.expand(this)">
    <img src="../../../../remark_files/thumbnails/protocol-39e01b807e173688.png" alt="T=Task outside the scanner; TS=Task while scanning; TI=Task in the scanner but without actual scanning; B=break " title="T=Task outside the scanner; TS=Task while scanning; TI=Task in the scanner but without actual scanning; B=break " /></a>
<div class="highslide-caption">
T=Task outside the scanner; TS=Task while scanning; TI=Task in the scanner but without actual scanning; B=break 
</div>
</div>

<p>The aim of this protocol was to assess the effects of Ballistocardiographic 
artifacts in simultaneous EEG-fMRI recordings. Consequently, the protocol
consisted of two modalities (EEG and functional MRI) and three conditions.
In the first condition (having the condition ID <code>out</code>) the subjects performed
a GO-NOGO task outside the scanner. In the second and third conditions (with
IDs <code>in-scan</code> and <code>out-scan</code> the subjects performed the task inside the scanner 
with and without scanning. Moreover, each condition consisted of 4 blocks. 
There were only 2 subjects.</p>
<h2>Template settings file</h2>
<p>Before anything else you need to write a text file that specifies the
particularities of your recording. The information that needs to be placed in
such a file includes the list of recording modalities, the list of subjects and
their characteristics, the list of experimental conditions, etc. To generate
a template <em>recording settings</em> file you can use the script 
<code>somsds_new_rec_settings</code>. In our example, the command that we need to run is:</p>
<pre><code>somsds_new_rec_settings bcgs --subjects 1,2 
    --modalities eeg,fmri 
    --conditions out,in-scan,in-noscan
    --responsible gherrero
    --description "BCG Study"
</code></pre>
<p>The option <code>--responsible</code> must be followed by a valid username. This username 
will be the owner of the recording directory tree that we will generate later.
As such he or she will have full control of that folder, including being able
to change the permissions of the folder and to wipe out all its contents. It is
 also a good idea to provide a short description of the experiment using option
<code>--description</code>. </p>
<p>The command above will generate file <code>bcgs_settings.ini</code>, whose contents
are shown below:</p>
<pre><code>[recording bcgs]
responsible=gherrero
description=BCG Study

[modality eeg]

[modality fmri]

[condition out]

[condition in-scan]

[condition in-noscan]

[subject 0001]
sex=
age=

[subject 0002]
sex=
age=
</code></pre>
<h2>Edit the template settings file</h2>
<p>You should edit <code>bcgs_settings.ini</code> so that it contains all the relevant
pieces of information about of your experimental protocol. In our <code>bcgs</code> 
example, we ended up with the following:</p>
<pre><code>[recording bcgs]
responsible=gherrero
description=BCG Study
location=Spinoza
date=7-September-2011
note=Everything went fine!

[modality eeg]
note=There are quite a few broken sensors

[modality fmri]

[modality smri]

[condition out]
description=Task outside the scanner

[condition in-scan]
description=Task while scanning

[condition out-noscan]
description=Task without scanning

[device egi256]
description=MR compatible EGI system with 256 sensors

[device philips-spinoza]
description=Philips Achieva 3T MRI scanner

[subject 0001]
sex=M
age=32

[subject 0002]
sex=M
age=29
</code></pre>
<p>Note that the <code>bcgs_settings.ini</code> file contains several <em>sections</em>, and 
that each section may have multiple <em>properties</em>. For instance section 
<code>[modality eeg]</code> has only one property (<code>description</code>). You can add as many
properties as you consider necessary, as long as you follow the convention:</p>
<pre><code>[section_name]
property=value
</code></pre>
<p>You can also add new sections. For instance we added sections 
<code>[device egi256]</code> and <code>[device philips-spinoza]</code> to specify the
recording devices that we used. A common scenario when you will want to add
new sections is when you acquire data from new subjects. If, for instance,
we would now acquire data from a third subject we could simply add a section 
<code>[subject 0003]</code> to <code>bcgs_settings.ini</code>. </p>
<p>An important note when adding new subjects, modalities or conditions to 
<code>bcgs_settings.ini</code> is to use always section names like:</p>
<pre><code>[subject $SUBJID]

[condition $CONDID]

[modality $MODID]
</code></pre>
<p>where <code>$SUBJID</code>, <code>$CONDID</code>, and <code>$MODID</code> are valid subject, condition and
modality IDs. It is also important to remember that you are forced to use 
standard modality, technique and device names. To obtain a list of accepted 
modalities, techniques and devices you can run the command:</p>
<pre><code>somsds_get modality,technique,device
</code></pre>
<p>You are free to use the condition IDs of your choice, as long as they are valid
directory names. However, you are encouraged to reuse as much as possible 
condition IDs accross different recordings. You can get a list of very common 
and general conditions by running:</p>
<pre><code>somsds_get condition
</code></pre>
<p>which will display something like this:</p>
<pre><code>Valid condition values
-------------------

+-----------+---------------------------+
| condition | description               |
+-----------+---------------------------+
| rs-ec     | Resting state eyes closed |
| rs-eo     | Resting state eyes open   |
| sleep     | Sleep                     |
+-----------+---------------------------+
</code></pre>
<p>So if you acquire some sleep data you are strongly recommended to use the 
condition ID <code>sleep</code>, although you are not forced to.</p>
<h2>What now?</h2>
<p>We are now ready to go to the <a href="./howto_dirtree.htm">next step</a>, in which we will 
generate the directory tree that will hold our experimental data files.</p>
</div>
<div id="remark-footer">
<p><a href="http://kaba.hilvi.org/remark">Remark 1.5.1</a> - Page generated 16.10.2012 17:08.</p>
</div>
</div>
</body>
</html>
