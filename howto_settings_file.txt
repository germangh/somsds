Step 1: Specify recording characteristics
============

[[Parent]]: howto_recordings.txt


## A real example

To illustrate the process of bringing experimental data into the standard
SOMSDS directories we will use the experimental protocol depicted in the
 figure below:

[[set_many Gallery]]:
	thumbnail_max_width 500
	thumbnail_max_height 380
	
[[Gallery]]:
	protocol.png
	- T=Task outside the scanner; TS=Task while scanning; TI=Task in the scanner but without actual scanning; B=break
 
The aim of this protocol was to assess the effects of Ballistocardiographic 
artifacts in simultaneous EEG-fMRI recordings. Consequently, the protocol
consisted of two modalities (EEG and functional MRI) and three conditions.
In the first condition (having the condition ID `out`) the subjects performed
a GO-NOGO task outside the scanner. In the second and third conditions (with
IDs `in-scan` and `out-scan` the subjects performed the task inside the scanner 
with and without scanning. Moreover, each condition consisted of 4 blocks. 
There were only 2 subjects.

## Template settings file

Before anything else you need to write a text file that specifies the
particularities of your recording. The information that needs to be placed in
such a file includes the list of recording modalities, the list of subjects and
their characteristics, the list of experimental conditions, etc. To generate
a template _recording settings_ file you can use the script 
`somsds_new_rec_settings`. In our example, the command that we need to run is:

	somsds_new_rec_settings bcgs --subjects 1,2 
		--modalities eeg,fmri 
		--conditions out,in-scan,in-noscan
		--responsible gherrero
		--description "BCG Study"

The option `--responsible` must be followed by a valid username. This username 
will be the owner of the recording directory tree that we will generate later.
As such he or she will have full control of that folder, including being able
to change the permissions of the folder and to wipe out all its contents. It is
 also a good idea to provide a short description of the experiment using option
`--description`. 

The command above will generate file `bcgs_settings.ini`, whose contents
are shown below:

	[recording bcgs]
	responsible=gherrero
	description=BCG Study

	[modality eeg]

	[modality fmri]

	[condition out]

	[condition in-scan]

	[condition in-noscan]

	[subject 0001]
	sex=
	age=

	[subject 0002]
	sex=
	age=

	
## Edit the template settings file

You should edit `bcgs_settings.ini` so that it contains all the relevant
pieces of information about of your experimental protocol. In our `bcgs` 
example, we ended up with the following:

	[recording bcgs]
	responsible=gherrero
	description=BCG Study
	location=Spinoza
	date=7-September-2011
	note=Everything went fine!
	
	[modality eeg]
	note=There are quite a few broken sensors
	
	[modality fmri]

	[modality smri]
	
	[condition out]
	description=Task outside the scanner
	
	[condition in-scan]
	description=Task while scanning

	[condition out-noscan]
	description=Task without scanning
	
	[device egi256]
	description=MR compatible EGI system with 256 sensors
	
	[device philips-spinoza]
	description=Philips Achieva 3T MRI scanner

	[subject 0001]
	sex=M
	age=32

	[subject 0002]
	sex=M
	age=29
	
Note that the `bcgs_settings.ini` file contains several _sections_, and 
that each section may have multiple _properties_. For instance section 
`[modality eeg]` has only one property (`description`). You can add as many
properties as you consider necessary, as long as you follow the convention:

	[section_name]
	property=value

You can also add new sections. For instance we added sections 
`[device egi256]` and `[device philips-spinoza]` to specify the
recording devices that we used. A common scenario when you will want to add
new sections is when you acquire data from new subjects. If, for instance,
we would now acquire data from a third subject we could simply add a section 
`[subject 0003]` to `bcgs_settings.ini`. 

An important note when adding new subjects, modalities or conditions to 
`bcgs_settings.ini` is to use always section names like:

	[subject $SUBJID]
	
	[condition $CONDID]
	
	[modality $MODID]
	
where `$SUBJID`, `$CONDID`, and `$MODID` are valid subject, condition and
modality IDs. It is also important to remember that you are forced to use 
standard modality, technique and device names. To obtain a list of accepted 
modalities, techniques and devices you can run the command:

	somsds_get modality,technique,device

You are free to use the condition IDs of your choice, as long as they are valid
directory names. However, you are encouraged to reuse as much as possible 
condition IDs accross different recordings. You can get a list of very common 
and general conditions by running:

	somsds_get condition

which will display something like this:

	Valid condition values
	-------------------

	+-----------+---------------------------+
	| condition | description               |
	+-----------+---------------------------+
	| rs-ec     | Resting state eyes closed |
	| rs-eo     | Resting state eyes open   |
	| sleep     | Sleep                     |
	+-----------+---------------------------+

So if you acquire some sleep data you are strongly recommended to use the 
condition ID `sleep`, although you are not forced to.



## What now?

We are now ready to go to the [next step][howto_dirtree], in which we will 
generate the directory tree that will hold our experimental data files.

[howto_dirtree]: ./howto_dirtree.htm
